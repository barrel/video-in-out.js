(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/*!
 * Knot.js 1.1.1 - A browser-based event emitter, for tying things together.
 * Copyright (c) 2016 Michael Cavalea - https://github.com/callmecavs/knot.js
 * License: MIT
 */
!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.Knot=e()}(this,function(){"use strict";var n={};n["extends"]=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};var e=function(){function e(n,e){return f[n]=f[n]||[],f[n].push(e),this}function t(n,t){return t._once=!0,e(n,t),this}function r(n){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return e?f[n].splice(f[n].indexOf(e),1):delete f[n],this}function o(n){for(var e=this,t=arguments.length,o=Array(t>1?t-1:0),i=1;t>i;i++)o[i-1]=arguments[i];var u=f[n]&&f[n].slice();return u&&u.forEach(function(t){t._once&&r(n,t),t.apply(e,o)}),this}var i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],f={};return n["extends"]({},i,{on:e,once:t,off:r,emit:o})};return e});
},{}],2:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
var requestFrame = window.requestAnimationFrame;
var cancelFrame = window.cancelAnimationFrame;
var scrollChanged = void 0,
    y = void 0,
    prevY = -1,
    idle = true,
    queue = [],
    timeout = void 0,
    tickId = void 0,
    init = false;

if (!requestFrame) {
  ['ms', 'moz', 'webkit', 'o'].every(function (prefix) {
    requestFrame = window[prefix + 'RequestAnimationFrame'];
    cancelFrame = window[prefix + 'CancelAnimationFrame'] || window[prefix + 'CancelRequestAnimationFrame'];
    return !requestFrame;
  });
}

var isSupported = !!requestFrame;

var enable = function enable() {
  window.addEventListener('scroll', debounce);
  document.body.addEventListener('touchmove', debounce);
};

var disable = function disable() {
  window.removeEventListener('scroll', debounce);
  document.body.removeEventListener('touchmove', debounce);
};

var debounce = function debounce() {
  if (!tickId) {
    disable();
    tick();
  }
};

var tick = function tick() {
  tickId = requestFrame(handleScroll);
};

var handleScroll = function handleScroll() {
  y = window.pageYOffset;
  queue.forEach(function (fn) {
    return fn(y, prevY);
  });

  scrollChanged = false;
  if (prevY != y) {
    scrollChanged = true;
    prevY = y;
  }

  if (scrollChanged) {
    clearTimeout(timeout);
    timeout = null;
  } else if (!timeout) {
    timeout = setTimeout(detectIdle, 200);
  }

  tick();
};

var detectIdle = function detectIdle() {
  cancelFrame(tickId);
  tickId = null;
  enable();
};

exports.default = function (cb) {
  if (isSupported) {
    queue.push(cb);
    if (!init) {
      init = true;
      debounce();
      enable();
    }
  } else {
    console.warn('Request Animation Frame not supported');
  }
};

},{}],3:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _rafScroll = require('raf-scroll.js');

var _rafScroll2 = _interopRequireDefault(_rafScroll);

var _knot = require('knot.js');

var _knot2 = _interopRequireDefault(_knot);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var inViewport = function inViewport(el) {
  var rect = el.getBoundingClientRect();
  return rect.top < rect.height && rect.top + rect.height > 0;
};

var merge = function merge(defaults) {
  return function (overwrites) {
    Object.keys(overwrites).forEach(function (val) {
      defaults[val] = overwrites[val];
    });
    return defaults;
  };
};

var testState = function testState(el) {
  return el.readyState == 4;
};

var setSrc = function setSrc(el) {
  return el.setAttribute('src', el.getAttribute('data-src'));
};

var addClass = function addClass(cssClass, el) {
  return el.classList.add(cssClass);
};

var fadeIn = function fadeIn(el) {
  //let innerEl = document.querySelector('.js-hero-inner')
  //Velocity(el.parentNode, "fadeIn", {duration:2000, delay:500})
  //Velocity(innerEl, "transition.slideUpIn", {duration: 1500})
};

exports.default = function (el) {
  var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

  var settings = merge({
    readyClass: 'video-ready',
    parentEl: el.parentNode,
    autoload: true,
    fadeIn: fadeIn
  })(opts);

  var revealed = false;
  var ready = false;
  var paused = true;

  var play = function play() {
    if (ready && paused) {
      paused = false;
      el.play();
    }
  };

  var pause = function pause() {
    if (!paused) {
      paused = true;
      el.pause();
    }
  };

  var setReady = function setReady(value) {
    if (!value) return;
    if (inViewport(el)) play(el);
    if (!revealed) {
      revealed = true;
      settings.fadeIn(el);
    }
    ready = value;
  };

  //Add src immediately
  if (settings.autoload) setSrc(el);

  (0, _rafScroll2.default)(function (y, prevY) {
    if (inViewport(el)) {
      if (!el.getAttribute('src')) {
        setSrc(el);
      }
      play(el);
    } else {
      pause(el);
    }
  });['canplaythrough', 'canplay'].forEach(function (event) {
    el.addEventListener(event, function () {
      setReady(testState(el));
    });
  });

  setReady(testState(el));
};

},{"knot.js":1,"raf-scroll.js":2}],4:[function(require,module,exports){
'use strict';

var _main = require('./../src/main.js');

var _main2 = _interopRequireDefault(_main);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

document.addEventListener('DOMContentLoaded', function (e) {
  var videoEl = document.querySelector('video');
  (0, _main2.default)(videoEl);
});

},{"./../src/main.js":3}]},{},[4])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMva25vdC5qcy9kaXN0L2tub3QubWluLmpzIiwibm9kZV9tb2R1bGVzL3JhZi1zY3JvbGwuanMvc3JjL21haW4uanMiLCJzcmMvbWFpbi5qcyIsInRlc3QvZGV2LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FDTEEsSUFBSSxlQUFlLE9BQU8scUJBQTFCO0FBQ0EsSUFBSSxjQUFlLE9BQU8sb0JBQTFCO0FBQ0EsSUFBSSxzQkFBSjtBQUFBLElBQW1CLFVBQW5CO0FBQUEsSUFBc0IsUUFBUSxDQUFDLENBQS9CO0FBQUEsSUFBa0MsT0FBTyxJQUF6QztBQUFBLElBQStDLFFBQVEsRUFBdkQ7QUFBQSxJQUEyRCxnQkFBM0Q7QUFBQSxJQUFvRSxlQUFwRTtBQUFBLElBQTRFLE9BQU8sS0FBbkY7O0FBRUEsSUFBSSxDQUFDLFlBQUwsRUFBbUI7QUFDakIsR0FBQyxJQUFELEVBQU8sS0FBUCxFQUFjLFFBQWQsRUFBd0IsR0FBeEIsRUFBNkIsS0FBN0IsQ0FBbUMsa0JBQVU7QUFDM0MsbUJBQWUsT0FBTyxTQUFTLHVCQUFoQixDQUFmO0FBQ0Esa0JBQWUsT0FBTyxTQUFTLHNCQUFoQixLQUNBLE9BQU8sU0FBUyw2QkFBaEIsQ0FEZjtBQUVBLFdBQU8sQ0FBQyxZQUFSO0FBQ0QsR0FMRDtBQU1EOztBQUVELElBQU0sY0FBYyxDQUFDLENBQUMsWUFBdEI7O0FBRUEsSUFBTSxTQUFTLFNBQVQsTUFBUyxHQUFNO0FBQ25CLFNBQU8sZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBa0MsUUFBbEM7QUFDQSxXQUFTLElBQVQsQ0FBYyxnQkFBZCxDQUErQixXQUEvQixFQUE0QyxRQUE1QztBQUNELENBSEQ7O0FBS0EsSUFBTSxVQUFVLFNBQVYsT0FBVSxHQUFNO0FBQ3BCLFNBQU8sbUJBQVAsQ0FBMkIsUUFBM0Is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Iiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyohXG4gKiBLbm90LmpzIDEuMS4xIC0gQSBicm93c2VyLWJhc2VkIGV2ZW50IGVtaXR0ZXIsIGZvciB0eWluZyB0aGluZ3MgdG9nZXRoZXIuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgTWljaGFlbCBDYXZhbGVhIC0gaHR0cHM6Ly9naXRodWIuY29tL2NhbGxtZWNhdnMva25vdC5qc1xuICogTGljZW5zZTogTUlUXG4gKi9cbiFmdW5jdGlvbihuLGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGUpOm4uS25vdD1lKCl9KHRoaXMsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgbj17fTtuW1wiZXh0ZW5kc1wiXT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihuKXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgdD1hcmd1bWVudHNbZV07Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihuW3JdPXRbcl0pfXJldHVybiBufTt2YXIgZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUobixlKXtyZXR1cm4gZltuXT1mW25dfHxbXSxmW25dLnB1c2goZSksdGhpc31mdW5jdGlvbiB0KG4sdCl7cmV0dXJuIHQuX29uY2U9ITAsZShuLHQpLHRoaXN9ZnVuY3Rpb24gcihuKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPD0xfHx2b2lkIDA9PT1hcmd1bWVudHNbMV0/ITE6YXJndW1lbnRzWzFdO3JldHVybiBlP2Zbbl0uc3BsaWNlKGZbbl0uaW5kZXhPZihlKSwxKTpkZWxldGUgZltuXSx0aGlzfWZ1bmN0aW9uIG8obil7Zm9yKHZhciBlPXRoaXMsdD1hcmd1bWVudHMubGVuZ3RoLG89QXJyYXkodD4xP3QtMTowKSxpPTE7dD5pO2krKylvW2ktMV09YXJndW1lbnRzW2ldO3ZhciB1PWZbbl0mJmZbbl0uc2xpY2UoKTtyZXR1cm4gdSYmdS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuX29uY2UmJnIobix0KSx0LmFwcGx5KGUsbyl9KSx0aGlzfXZhciBpPWFyZ3VtZW50cy5sZW5ndGg8PTB8fHZvaWQgMD09PWFyZ3VtZW50c1swXT97fTphcmd1bWVudHNbMF0sZj17fTtyZXR1cm4gbltcImV4dGVuZHNcIl0oe30saSx7b246ZSxvbmNlOnQsb2ZmOnIsZW1pdDpvfSl9O3JldHVybiBlfSk7IiwibGV0IHJlcXVlc3RGcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbmxldCBjYW5jZWxGcmFtZSAgPSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWVcbmxldCBzY3JvbGxDaGFuZ2VkLCB5LCBwcmV2WSA9IC0xLCBpZGxlID0gdHJ1ZSwgcXVldWUgPSBbXSwgdGltZW91dCwgdGlja0lkLCBpbml0ID0gZmFsc2VcblxuaWYgKCFyZXF1ZXN0RnJhbWUpIHtcbiAgWydtcycsICdtb3onLCAnd2Via2l0JywgJ28nXS5ldmVyeShwcmVmaXggPT4ge1xuICAgIHJlcXVlc3RGcmFtZSA9IHdpbmRvd1twcmVmaXggKyAnUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG4gICAgY2FuY2VsRnJhbWUgID0gd2luZG93W3ByZWZpeCArICdDYW5jZWxBbmltYXRpb25GcmFtZSddIHx8XG4gICAgICAgICAgICAgICAgICAgd2luZG93W3ByZWZpeCArICdDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXTtcbiAgICByZXR1cm4gIXJlcXVlc3RGcmFtZTtcbiAgfSlcbn1cblxuY29uc3QgaXNTdXBwb3J0ZWQgPSAhIXJlcXVlc3RGcmFtZVxuXG5jb25zdCBlbmFibGUgPSAoKSA9PiB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBkZWJvdW5jZSlcbiAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBkZWJvdW5jZSlcbn1cblxuY29uc3QgZGlzYWJsZSA9ICgpID0+IHtcbiAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGRlYm91bmNlKVxuICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGRlYm91bmNlKVxufVxuXG5jb25zdCBkZWJvdW5jZSA9ICgpID0+IHtcbiAgaWYgKCF0aWNrSWQpe1xuICAgIGRpc2FibGUoKVxuICAgIHRpY2soKVxuICB9XG59XG5cbmNvbnN0IHRpY2sgPSAoKSA9PiB7XG4gIHRpY2tJZCA9IHJlcXVlc3RGcmFtZShoYW5kbGVTY3JvbGwpXG59XG5cbmNvbnN0IGhhbmRsZVNjcm9sbCA9ICgpID0+IHtcbiAgeSA9IHdpbmRvdy5wYWdlWU9mZnNldFxuICBxdWV1ZS5mb3JFYWNoKCBmbiA9PiBmbih5LCBwcmV2WSkgKVxuXG4gIHNjcm9sbENoYW5nZWQgPSBmYWxzZVxuICBpZiAocHJldlkgIT0geSl7XG4gICAgc2Nyb2xsQ2hhbmdlZCA9IHRydWVcbiAgICBwcmV2WSA9IHlcbiAgfVxuXG4gIGlmIChzY3JvbGxDaGFuZ2VkKXtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dClcbiAgICB0aW1lb3V0ID0gbnVsbFxuICB9IGVsc2UgaWYgKCF0aW1lb3V0KXtcbiAgICB0aW1lb3V0ID0gc2V0VGltZW91dChkZXRlY3RJZGxlLCAyMDApXG4gIH1cblxuICB0aWNrKClcbn1cblxuY29uc3QgZGV0ZWN0SWRsZSA9ICgpID0+IHtcbiAgY2FuY2VsRnJhbWUodGlja0lkKVxuICB0aWNrSWQgPSBudWxsXG4gIGVuYWJsZSgpXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNiID0+IHtcbiAgaWYgKGlzU3VwcG9ydGVkKXtcbiAgICBxdWV1ZS5wdXNoKGNiKVxuICAgIGlmICghaW5pdCl7XG4gICAgICBpbml0ID0gdHJ1ZVxuICAgICAgZGVib3VuY2UoKVxuICAgICAgZW5hYmxlKClcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS53YXJuKCdSZXF1ZXN0IEFuaW1hdGlvbiBGcmFtZSBub3Qgc3VwcG9ydGVkJylcbiAgfVxufSIsImltcG9ydCBzY3JvbGwgZnJvbSAncmFmLXNjcm9sbC5qcydcbmltcG9ydCBrbm90IGZyb20gJ2tub3QuanMnXG5cbmNvbnN0IGluVmlld3BvcnQgPSBlbCA9PiB7XG4gbGV0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuIHJldHVybiAocmVjdC50b3AgPCByZWN0LmhlaWdodCkgJiYgKHJlY3QudG9wICsgcmVjdC5oZWlnaHQgPiAwKVxufVxuXG5jb25zdCBtZXJnZSA9IGRlZmF1bHRzID0+IG92ZXJ3cml0ZXMgPT4ge1xuICBPYmplY3Qua2V5cyhvdmVyd3JpdGVzKS5mb3JFYWNoKCB2YWwgPT4ge1xuICAgIGRlZmF1bHRzW3ZhbF0gPSBvdmVyd3JpdGVzW3ZhbF1cbiAgfSlcbiAgcmV0dXJuIGRlZmF1bHRzXG59XG5cbmNvbnN0IHRlc3RTdGF0ZSA9IGVsID0+IGVsLnJlYWR5U3RhdGUgPT0gNFxuXG5jb25zdCBzZXRTcmMgPSBlbCA9PiBlbC5zZXRBdHRyaWJ1dGUoJ3NyYycsIGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKSApXG5cbmNvbnN0IGFkZENsYXNzID0gKGNzc0NsYXNzLCBlbCkgPT4gZWwuY2xhc3NMaXN0LmFkZChjc3NDbGFzcylcblxuY29uc3QgZmFkZUluID0gZWwgPT4ge1xuICAvL2xldCBpbm5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWhlcm8taW5uZXInKVxuICAvL1ZlbG9jaXR5KGVsLnBhcmVudE5vZGUsIFwiZmFkZUluXCIsIHtkdXJhdGlvbjoyMDAwLCBkZWxheTo1MDB9KVxuICAvL1ZlbG9jaXR5KGlubmVyRWwsIFwidHJhbnNpdGlvbi5zbGlkZVVwSW5cIiwge2R1cmF0aW9uOiAxNTAwfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgKGVsLCBvcHRzPXt9KSA9PiB7XG4gIGNvbnN0IHNldHRpbmdzID0gbWVyZ2Uoe1xuICAgIHJlYWR5Q2xhc3M6J3ZpZGVvLXJlYWR5JyxcbiAgICBwYXJlbnRFbDplbC5wYXJlbnROb2RlLFxuICAgIGF1dG9sb2FkOnRydWUsXG4gICAgZmFkZUluOmZhZGVJblxuICB9KShvcHRzKVxuXG4gIGxldCByZXZlYWxlZCA9IGZhbHNlXG4gIGxldCByZWFkeSAgICA9IGZhbHNlXG4gIGxldCBwYXVzZWQgICA9IHRydWVcblxuICBsZXQgcGxheSA9ICgpID0+IHtcbiAgICBpZiAocmVhZHkgJiYgcGF1c2VkKXtcbiAgICAgIHBhdXNlZCA9IGZhbHNlXG4gICAgICBlbC5wbGF5KClcbiAgICB9IFxuICB9XG5cbiAgbGV0IHBhdXNlID0gKCkgPT4ge1xuICAgIGlmICghcGF1c2VkKXtcbiAgICAgIHBhdXNlZCA9IHRydWVcbiAgICAgIGVsLnBhdXNlKClcbiAgICB9XG4gIH1cblxuICBsZXQgc2V0UmVhZHkgPSAodmFsdWUpID0+IHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm5cbiAgICBpZiAoIGluVmlld3BvcnQoZWwpICkgcGxheShlbClcbiAgICBpZiAoIXJldmVhbGVkKXtcbiAgICAgIHJldmVhbGVkID0gdHJ1ZVxuICAgICAgc2V0dGluZ3MuZmFkZUluKGVsKVxuICAgIH1cbiAgICByZWFkeSA9IHZhbHVlXG4gIH1cblxuICAvL0FkZCBzcmMgaW1tZWRpYXRlbHlcbiAgaWYgKHNldHRpbmdzLmF1dG9sb2FkKSBzZXRTcmMoZWwpXG5cbiAgc2Nyb2xsKCAoeSwgcHJldlkpID0+IHtcbiAgICBpZiAoIGluVmlld3BvcnQoZWwpICl7XG4gICAgICBpZiAoICFlbC5nZXRBdHRyaWJ1dGUoJ3NyYycpICl7XG4gICAgICAgIHNldFNyYyhlbClcbiAgICAgIH1cbiAgICAgIHBsYXkoZWwpXG4gICAgfSBlbHNlIHtcbiAgICAgIHBhdXNlKGVsKVxuICAgIH1cbiAgfSlcblxuICA7WydjYW5wbGF5dGhyb3VnaCcsJ2NhbnBsYXknXS5mb3JFYWNoKCBldmVudCA9PiB7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgKCkgPT4ge1xuICAgICAgc2V0UmVhZHkoIHRlc3RTdGF0ZShlbCkgKVxuICAgIH0pXG4gIH0pXG5cbiAgc2V0UmVhZHkoIHRlc3RTdGF0ZShlbCkgKVxufVxuIiwiaW1wb3J0IHZpZGVvIGZyb20gJy4vLi4vc3JjL21haW4uanMnXG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBlID0+IHtcbiAgY29uc3QgdmlkZW9FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3ZpZGVvJylcbiAgdmlkZW8odmlkZW9FbClcbn0pXG4iXX0=
